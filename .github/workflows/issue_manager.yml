name: WhyDRS Issue Manager  # Name of the workflow

on:
  schedule:
    - cron: '0 0 * * *'    # Schedule the workflow to run once a day at midnight UTC
  workflow_dispatch:        # Allow manual triggering of the workflow from the GitHub UI

jobs:
  update-project:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3  # Checks out the repository to the runner

      - name: Set up Python
        uses: actions/setup-python@v4  # Sets up the Python environment
        with:
          python-version: '3.x'        # Specifies the Python version to use

      - name: Install Dependencies
        run: |
          pip install PyGithub==1.59

      - name: Run Script
        env:
          APP_ID: ${{ secrets.APP_ID }}                   # Passes the GitHub App ID from secrets
          APP_PRIVATE_KEY: ${{ secrets.APP_PRIVATE_KEY }} # Passes the GitHub App private key from secrets
        run: |
          python src/Issue-Manager/issue_manager_script.py  
